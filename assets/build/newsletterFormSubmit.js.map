{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/blocks/Newsletter/js/NewsletterFormSubmit.js"],"names":["newsletter_form_element","$","on","post_form_value","getFormObj","form_config","action","nonce","window","marketingcode","literaturecode","screenid","toggleDisable","find","human","showErrorMessage","ajax","type","url","ajaxUrl","data","success","console","log","hide","html","dataLayer","push","error","el","formObj","inputs","serializeArray","each","i","input","name","value","prop","append","location","href"],"mappings":"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","file":"newsletterFormSubmit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/src/blocks/Newsletter/js/NewsletterFormSubmit.js\");\n","var newsletter_form_element = {};\r\n$('.gpnl-newsletter__form').on('submit', function () {\r\n\r\n\tnewsletter_form_element = this;\r\n\t// Get the  parameter from the newsletter form and add the action and CSRF protection\r\n\tvar post_form_value = getFormObj(newsletter_form_element);\r\n\tvar form_config = 'newsletter_form_object_' + post_form_value['form_id'];\r\n\r\n\tpost_form_value.action = 'newsletter_form_process';\r\n\tpost_form_value.nonce  = window[form_config].nonce;\r\n\tpost_form_value.marketingcode  = window[form_config].marketingcode;\r\n\tpost_form_value.literaturecode  = window[form_config].literaturecode;\r\n\tpost_form_value.screenid  = window[form_config].screenid;\r\n\r\n\r\n\ttoggleDisable($(newsletter_form_element).find('*'));\r\n\tif (post_form_value.human !== '') {\r\n\t\tshowErrorMessage(newsletter_form_element);\r\n\t\treturn\r\n\t}\r\n\r\n\t$.ajax({\r\n\t\ttype:    'POST',\r\n\t\turl:     window[form_config].ajaxUrl,\r\n\t\tdata:    post_form_value,\r\n\t\tsuccess: function() {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.log('^-^');\r\n\t\t\t$(newsletter_form_element).find('*').hide();\r\n\t\t\t$('.gpnl-newsletter__title').html('Hoera, je bent er bijna! ');\r\n\t\t\t$('.gpnl-newsletter__description').html('<h4>Bevestig je aanmelding via de mail die je van ons ontvangt. Bedankt!  </h4>');\r\n\r\n\t\t\t// Send conversion event to the GTM\r\n\t\t\tif (typeof dataLayer !== 'undefined') {\r\n\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t'event'         : 'nieuwsbriefformulier',\r\n\t\t\t\t\t'conv_campaign' : post_form_value.literaturecode,\r\n\t\t\t\t\t'conv_action'   : 'registreer',\r\n\t\t\t\t\t'conv_label'    : 'registreer-nieuwsbrief'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\terror: function(){\r\n\t\t\t// If the backend sends an error, hide the thank element and show an error urging to try again\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.log('o_o');\r\n\t\t\tshowErrorMessage(newsletter_form_element);\r\n\t\t}\r\n\t});\r\n\r\n});\r\n\r\n// Get the key+value from the input fields in the form\r\nfunction getFormObj(el) {\r\n\tvar formObj = {};\r\n\tvar inputs = $(el).serializeArray();\r\n\t$.each(inputs, function (i, input) {\r\n\t\tformObj[input.name] = input.value;\r\n\t});\r\n\treturn formObj;\r\n}\r\n\r\n// Toggle the disabled state on form elements\r\nfunction toggleDisable(el) {\r\n\tel.prop('disabled', !el.prop('disabled'));\r\n\r\n}\r\n\r\nfunction showErrorMessage(newsletter_form_element) {\r\n\t$(newsletter_form_element).find('*').hide();\r\n\t$('.gpnl-newsletter__title').html('Oh nee!');\r\n\t$('.gpnl-newsletter__description').html('<p>Hier gaat helaas iets mis, sorry. </p>');\r\n\t$(newsletter_form_element).append(\r\n\t\t'<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\r\n\t\t'\">Probeer je het nog eens? </a>');\r\n}\r\n"],"sourceRoot":""}