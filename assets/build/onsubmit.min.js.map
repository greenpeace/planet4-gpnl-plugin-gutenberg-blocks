{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/blocks/Petition/js/onsubmit.js","webpack:///external {\"this\":\"jQuery\"}"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","cardflip","el","element","$","parent","card","flip_positionattribute","petition_form_element","post_form_value","getFormObj","formObj","inputs","input","form_config","window","toggleDisable","type","url","data","success","console","phone","optin","phoneFilled","phonetmp","phoneResult","mailtmp","mailResult","dataLayer","fbq","socialBlueDeDuplicate","email","apref","apHost","document","apSrc","_apOrderValue","_apOrderNumber","_apRef","unescape","err","script","getUrlVars","vars","hashes","uri","hash","clang","error","cardback","fireShareEvent","platform","this"],"mappings":"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","file":"onsubmit.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/src/blocks/Petition/js/onsubmit.js\");\n","import $ from 'jquery';\n\n$('.gpnl-petitionform').on('submit', function () {\n  var petition_form_element = this;\n  // Get the  parameter from the petition form and add the action and CSRF protection\n  var post_form_value = getFormObj(petition_form_element);\n  var form_config = 'petition_form_object_' + post_form_value['form_id'];\n\n  post_form_value.action = 'petition_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.ad_campaign = window[form_config].ad_campaign;\n\n  // Disable the form so people can't resubmit\n  toggleDisable($(petition_form_element).find('*'));\n\n  // Do a ajax call to the wp_admin admin_ajax.php,\n  // which triggers processing function in the petition block\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function(data) {\n      // eslint-disable-next-line no-console\n      console.log('^-^');\n      const {phone, consent} = post_form_value;\n      let optin = ('on' === consent);\n      let phoneFilled = ('' !== phone);\n      let phonetmp = data['data']['phoneresult'];\n      let phoneResult = (false === phonetmp || true === phonetmp) ? phonetmp : null;\n\n      let mailtmp = data['data']['mailresult'];\n      let mailResult = (false === mailtmp || true === mailtmp) ? mailtmp : null;\n\n      // Send conversion event to the GTM\n      if (typeof dataLayer !== 'undefined') {\n        // New conversion object\n        dataLayer.push(\n          {\n            'event':      'RegisterComplete',\n            'campaign':   window[form_config].analytics_campaign,\n            'action':     window[form_config].ga_action,\n            'emailKnown': mailResult,\n            'telKnown':   phoneResult,\n            'telFilled':  phoneFilled,\n            'optin':      optin,\n          });\n\n        // Temp old stuff to compare\n        dataLayer.push({\n          'event'         :'petitiebutton',\n          'conv_campaign' : window[form_config].analytics_campaign,\n          'conv_action'   : window[form_config].ga_action,\n          'conv_label'    :'registreer'\n        });\n\n        // if consent was given by entering phonenumber\n        if (phoneFilled) {\n          // Send conversion event to the GTM\n          // Temp old stuff to compare\n          dataLayer.push({\n            'event'         :'petitiebutton',\n            'conv_campaign' : window[form_config].analytics_campaign,\n            'conv_action'   :'telnr',\n            'conv_label'    :'Ja',\n          });\n          // If an ad campaign is run by an external company fire the conversiontracking\n          if (window[form_config].ad_campaign === 'SB') {\n            fbq('track', 'Lead');\n            // if it is run by social blue, also deduplicate\n            socialBlueDeDuplicate(post_form_value['mail'], data['data']['phonesanitized'], window[form_config].apref);\n          } else if (window[form_config].ad_campaign === 'JA') {\n            fbq('track', window[form_config].jalt_track);\n          }\n        }\n        else{\n          // Temp old stuff to compare\n          dataLayer.push({\n            'event'         :'petitiebutton',\n            'conv_campaign' : window[form_config].analytics_campaign,\n            'conv_action'   :'telnr',\n            'conv_label'    :'Nee',\n          });\n        }\n      }\n\n\n\n      // cardflip the card, positionattribute flips to make sure no problems arises with different lengths of the front and back of the card, finally hide the front\n      cardflip(petition_form_element);\n      let clangct=getUrlVars()['clangct'];\n      if(clangct != undefined){clang.conversion.track();}\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      // eslint-disable-next-line no-console\n      console.log('o_o');\n      var cardback = $(petition_form_element.parentNode.nextElementSibling);\n      cardback.find('*').hide('');\n      cardback.append('<p>Sorry, er gaat momenteel iets fout, probeer het nu of later opnieuw.</p>');\n      cardback.append(\n        '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n        '\">Probeer opnieuw</a>');\n      cardflip(petition_form_element);\n    }\n  });\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n\n}\n\n// toggle the flipped class for the card parent\nfunction cardflip(el) {\n  let element = $(el);\n  let parent =  el.parentNode;\n  let card = $(el.parentNode.parentNode);\n\n  // first hide the signing button\n  $(element.find('.signBtn')).toggle();\n  $(element.find('.policies')).toggle();\n  // then cardflip the position attribute on the front and back of the card to support different lengths front and back\n  $(parent.nextElementSibling).css( 'position', flip_positionattribute(parent.nextElementSibling));\n  $(parent).css( 'position', flip_positionattribute(parent));\n  // then cardflip the card\n  card.toggleClass('flipped');\n\n  // after animation hide the front\n  card.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',\n    function() {\n      $(parent).toggle();\n      card.off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend');\n    });\n\n}\n\nfunction flip_positionattribute (el){\n  return $(el).css('position') === 'absolute' ? 'relative' : 'absolute';\n}\n\n/* eslint-disable */\nfunction fireShareEvent (platform, form_id){\n  if (typeof dataLayer !== 'undefined') {\n    let form_config = 'petition_form_object_' + form_id;\n    dataLayer.push({\n      'event'         :'petitiebutton',\n      'conv_campaign' :window[form_config].analytics_campaign,\n      'conv_action'   :window[form_config].ga_action,\n      'conv_label'    :'share_' + platform});\n  }\n  else{\n    console.log('GTM not defined?');\n  }\n}\n\nwindow.fireShareEvent = fireShareEvent;\n/* eslint-enable */\n\n/* eslint-disable */\n// Send the supporter data to for deduplication\nfunction socialBlueDeDuplicate(email, phone, apref) {\n  var apHost = ('https:' == document.location.protocol ? 'https://secure.event.' : 'http://www.') + 'affiliatepartners.com';\n  var apSrc = '/js/ApConversionPixelV1.1.js';\n\n  _apOrderValue = 0;\n  _apOrderNumber = 'email=' + email + '-telefoonnumer=' + phone;\n  _apRef = apref;\n\n  try {\n    $('body').append(unescape('%3Cscript src=\\'' + apHost + apSrc + '\\' type=\\'text/javascript\\'%3E%3C/script%3E'));\n  } catch (err) {\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = apHost + apSrc;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  }\n}\n/* eslint-enable */\n\n// REFACTOR IE11 doesn't support UrlSearchParams, so custom UrlParam function.\n// \tConsider polyfilling it now? or wait until we drop IE11 support and switch then?\nfunction getUrlVars(){\n  var vars = [],\n    hash;\n  var uri = window.location.href.split('#')[0];\n  var hashes = uri.slice(window.location.href.indexOf('?') + 1).split('&');\n  for(var i = 0; i < hashes.length; i++){\n    hash = hashes[i].split('=');\n    vars.push(hash[0]);\n    vars[hash[0]] = hash[1];\n  }\n  return vars;\n}\n","(function() { module.exports = this[\"jQuery\"]; }());"],"sourceRoot":""}