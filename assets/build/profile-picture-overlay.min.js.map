{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/blocks/ProfilePictureOverlay/publicIndex.js","webpack:///./assets/src/blocks/ProfilePictureOverlay/scripts/public.js","webpack:///./assets/src/blocks/ProfilePictureOverlay/styles/public.scss","webpack:///./node_modules/croppie/croppie.css","webpack:///./node_modules/croppie/croppie.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///(webpack)/buildin/global.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","wrapper","document","canvasContainer","canvasWrap","overlay","uploadButton","handleImageUpload","e","reader","img","event","uploadButtonVisible","downloadButton","croppie","url","result","buttonRow","downloadCanvasAsImage","type","size","rawcanvas","ctx","dataURL","downloadLink","croppieWrapper","viewport","width","height","boundary","showZoomer","enableOrientation","enableExif","mouseWheelZoom","addCss","css","style","self","Promise","a","b","apply","arguments","this","TypeError","_state","_value","_deferreds","f","push","k","onFulfilled","onRejected","reject","resolve","then","g","length","h","j","setTimeout","setImmediate","Array","isArray","toString","all","slice","constructor","race","_setImmediateFn","window","CustomEvent","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","Event","HTMLCanvasElement","toBlob","callback","quality","binStr","atob","toDataURL","split","len","arr","Uint8Array","charCodeAt","Blob","CSS_TRANS_ORG","CSS_TRANSFORM","CSS_USERSELECT","cssPrefixes","emptyStyles","createElement","EXIF_NORM","EXIF_FLIP","vendorPrefix","prop","capProp","toUpperCase","deepExtend","destination","source","clone","dispatchChange","element","initEvent","dispatchEvent","fireEvent","el","styles","val","tmp","addClass","classList","add","className","setAttributes","attrs","setAttribute","num","v","parseInt","naturalImageDimensions","ornt","w","naturalWidth","naturalHeight","orient","getExifOrientation","x","TRANSLATE_OPTS","suffix","Transform","y","scale","parseFloat","parse","indexOf","fromMatrix","fromString","vals","substring","values","translate","Croppie","globals","TransformOrigin","exifdata","Orientation","drawCanvas","canvas","orientation","getContext","save","rotate","Math","PI","drawImage","restore","_create","bw","bh","customViewportClass","options","useCanvas","_hasExif","data","elements","preview","isNaN","appendChild","customClass","_initDraggable","enableZoom","_initializeZoom","enableResize","_initializeResize","EXIF","direction","originalX","originalY","maxWidth","maxHeight","vr","hr","wrap","isDragging","mouseDown","ev","button","preventDefault","overlayRect","getBoundingClientRect","pageX","pageY","currentTarget","touches","addEventListener","mouseMove","mouseUp","body","deltaX","deltaY","newHeight","newWidth","_updateOverlay","_updateZoomLimits","_updateCenterPoint","_triggerUpdate","removeEventListener","resizeControls","_setZoomerVal","z","zoomer","fix","max","min","zoomerWrap","change","_onZoom","origin","viewportRect","transform","scroll","delta","targetZoom","ctrlKey","wheelDelta","_currentZoom","step","display","ui","vpRect","applyCss","transCss","enforceBoundary","boundaries","_getVirtualBoundaries","transBoundaries","oBoundaries","maxX","minX","maxY","minY","_debouncedOverlay","vpWidth","vpHeight","centerFromBoundaryX","clientWidth","centerFromBoundaryY","clientHeight","imgRect","curImgWidth","curImgHeight","halfWidth","halfHeight","originMinX","originMinY","vpData","pc","top","left","center","adj","cx","cy","tx","ty","newCss","originalDistance","assignTransformCoordinates","bottom","right","toggleGrabState","touch1","touch2","dist","sqrt","keyDown","zoom","shiftKey","keyCode","enableKeyMovement","movement","parseKeyDown","keyMove","setZoom","boundRect","imgData","debounce","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","_isVisible","update","$","Prototype","trigger","offsetHeight","offsetWidth","_updatePropertiesFromImage","cssReset","transformReset","originReset","bound","_originalImageWidth","_originalImageHeight","points","_bindPoints","_centerImage","initial","initialZoom","defaultInitialZoom","minW","minH","minZoom","maxZoom","boundaryData","boundZoom","pointsWidth","vpOffset","originTop","originLeft","transformTop","transformLeft","imgDim","vpDim","boundDim","vpLeft","vpTop","_transferImageToCanvas","customOrientation","clearRect","_getCanvas","circle","canvasWidth","outputWidth","canvasHeight","outputHeight","backgroundColor","fillStyle","fillRect","sx","sy","sWidth","sHeight","dx","dy","dWidth","dHeight","abs","globalCompositeOperation","beginPath","arc","closePath","fill","_getHtmlResult","div","src","_getBase64Result","format","_getBlobResult","blob","_replaceImage","parentNode","forEach","replaceChild","_bind","cb","hasExif","loadImage","doExif","Image","opacity","_resolve","removeAttribute","match","onload","getData","onerror","relative","natDim","rect","aspectRatio","x0","y0","x1","y1","map","decimalPoints","toFixed","_get","widthDiff","heightDiff","x2","y2","Infinity","Number","NEGATIVE_INFINITY","RESULT_DEFAULTS","RESULT_FORMATS","_result","opts","resultType","ratio","toLowerCase","_refresh","_rotate","deg","getExifOffset","index","offset","oldHeight","oldWidth","_destroy","removeChild","removeClass","remove","replace","jQuery","fn","ot","singleInst","each","method","isFunction","removeData","Error","defaults","tagName","origImage","replacementDiv","bindOpts","orientationControls","enabled","leftClass","rightClass","refresh","destroy","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","run","runClearTimeout","marker","Item","array","noop","nextTick","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","global","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","installNextTickImplementation","handle","runIfPresent","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","MessageChannel","installMessageChannelImplementation","channel","port1","port2","installReadyStateChangeImplementation","html","documentElement","script","onreadystatechange","installSetTimeoutImplementation","installPostMessageImplementation","messagePrefix","random","onGlobalMessage","attachEvent","Function","task","clearImmediate","Timeout","id","clearFn","_id","_clearFn","scope","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","onTimeout","_onTimeout"],"mappings":"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","file":"profile-picture-overlay.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/src/blocks/ProfilePictureOverlay/publicIndex.js\");\n","// Styles\nimport './styles/public.scss';\nimport 'croppie/croppie.css';\n\n\n// Scripts\nimport './scripts/public';\n\n","import Croppie from 'croppie';\n\nconst wrapper = document.getElementById('profile-picture-overlay');\n\nconst canvasContainer = document.createElement('div');\ncanvasContainer.className = 'canvas_container';\n\nconst canvasWrap = document.createElement('div');\ncanvasWrap.className = 'canvas_wrap';\n\n// Overlay image, of which the source is pulled from the html data attribute.\nconst overlay = new Image();\noverlay.crossOrigin = 'anonymous';  // Fix CORS issue\noverlay.src = wrapper.dataset.overlayImage;\n\n// The actual upload button (which is hidden because browsers make it impossible to style it).\nconst uploadButton = document.createElement('input');\nuploadButton.type = 'file';\nuploadButton.id = 'imageLoader';\nuploadButton.name = 'imageLoader';\nuploadButton.style.display = 'none';\nuploadButton.addEventListener('change', handleImageUpload, false);\n\n// The visible upload button that is styled.\nconst uploadButtonVisible = document.createElement('button');\nuploadButtonVisible.className = 'btn btn-primary upload';\nuploadButtonVisible.textContent = 'upload foto';\nuploadButtonVisible.addEventListener('click', () => uploadButton.click());\n\nconst buttonRow = document.createElement('div');\nbuttonRow.className = 'button-row';\n\n// Download button that is shown after image is uploaded.\nconst downloadButton = document.createElement('button');\ndownloadButton.innerText = 'download';\ndownloadButton.className = 'btn btn-primary download';\ndownloadButton.style.display = 'none';\ndownloadButton.addEventListener('click', () => downloadCanvasAsImage());\n\nfunction handleImageUpload(e){\n  const reader = new FileReader();\n  reader.onload = function(event){\n    let img = new Image();\n    img.crossOrigin = 'anonymous';  // Fix CORS issue\n    img.src = event.target.result;\n\n    img.onload = function(){\n      canvasContainer.style.display = 'block';\n      uploadButtonVisible.innerText = 'upload andere foto';\n      uploadButtonVisible.className = 'btn btn-link';\n      downloadButton.style.display = 'inline-block';\n\n      // Bind image to croppie.\n      croppie.bind({\n        url: event.target.result,\n      });\n\n    };\n  };\n  reader.readAsDataURL(e.target.files[0]);\n}\n\nfunction downloadCanvasAsImage() {\n  croppie.result({type: 'rawcanvas', size: 'original'}).then(function(rawcanvas) {\n\n    // Draw overlay on the 'raw canvas'.\n    const ctx = rawcanvas.getContext('2d');\n    ctx.drawImage(overlay,0,0, overlay.width, overlay.height, 0, 0, rawcanvas.width, rawcanvas.height);\n\n\n    // Download the combined image.\n    let dataURL = rawcanvas.toDataURL('image/png');\n    let downloadLink = document.createElement('a');\n    downloadLink.setAttribute('download', 'profile-picture.png');\n    downloadLink.setAttribute('href', dataURL);\n    downloadLink.click();\n  });\n}\n\nconst croppieWrapper = document.createElement('div');\ncroppieWrapper.className = 'croppie-wrapper';\n\nconst croppie = new Croppie(croppieWrapper, {\n  viewport: { width: 100 + '%', height: 100 + '%' },\n  boundary: { width: 100 + '%', height: 100 + '%' },\n  showZoomer: false,\n  enableOrientation: true,\n  enableExif: true,\n  mouseWheelZoom: 'ctrl'\n});\n\ncanvasContainer.appendChild(croppieWrapper);\nbuttonRow.appendChild(downloadButton);\nwrapper.appendChild(canvasContainer);\nwrapper.appendChild(uploadButtonVisible);\nwrapper.appendChild(downloadButton);\n\n\n// Add <style> to <head>\nfunction addCss(css) {\n  const style = document.createElement('style');\n  style.innerText = css;\n  document.head.appendChild(style);\n}\n\n// Add the overlay image to croppie's '.cr-viewport' for the preview.\nconst css = `.cr-viewport{background-image: url(\\\"${overlay.src}\\\");background-size: cover;\"}`;\naddCss(css);\n\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","/*************************\r\n * Croppie\r\n * Copyright 2019\r\n * Foliotek\r\n * Version: 2.6.5\r\n *************************/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n        // CommonJS\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals\r\n        root.Croppie = factory();\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function () {\r\n\r\n    /* Polyfills */\r\n    if (typeof Promise !== 'function') {\r\n        /*! promise-polyfill 3.1.0 */\r\n        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!==typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!==typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"===typeof a||\"function\"===typeof a)){var c=a.then;if(\"function\"===typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"===typeof a?a:null,this.onRejected=\"function\"===typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"===typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"===typeof g||\"function\"===typeof g)){var h=g.then;if(\"function\"===typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"===typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!==typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n    }\r\n\r\n    if (typeof window !== 'undefined' && typeof window.CustomEvent !== \"function\") {\r\n        (function(){\r\n            function CustomEvent ( event, params ) {\r\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n                var evt = document.createEvent( 'CustomEvent' );\r\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n                return evt;\r\n            }\r\n            CustomEvent.prototype = window.Event.prototype;\r\n            window.CustomEvent = CustomEvent;\r\n        }());\r\n    }\r\n\r\n    if (typeof HTMLCanvasElement !== 'undefined' && !HTMLCanvasElement.prototype.toBlob) {\r\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n            value: function (callback, type, quality) {\r\n                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n                len = binStr.length,\r\n                arr = new Uint8Array(len);\r\n\r\n                for (var i=0; i<len; i++ ) {\r\n                    arr[i] = binStr.charCodeAt(i);\r\n                }\r\n\r\n                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n            }\r\n        });\r\n    }\r\n    /* End Polyfills */\r\n\r\n    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n        emptyStyles = typeof document !== 'undefined' ? document.createElement('div').style : {},\r\n        EXIF_NORM = [1,8,3,6],\r\n        EXIF_FLIP = [2,7,4,5],\r\n        CSS_TRANS_ORG,\r\n        CSS_TRANSFORM,\r\n        CSS_USERSELECT;\r\n\r\n    function vendorPrefix(prop) {\r\n        if (prop in emptyStyles) {\r\n            return prop;\r\n        }\r\n\r\n        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            prop = cssPrefixes[i] + capProp;\r\n            if (prop in emptyStyles) {\r\n                return prop;\r\n            }\r\n        }\r\n    }\r\n\r\n    CSS_TRANSFORM = vendorPrefix('transform');\r\n    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\r\n    function getExifOffset(ornt, rotate) {\r\n        var arr = EXIF_NORM.indexOf(ornt) > -1 ? EXIF_NORM : EXIF_FLIP,\r\n            index = arr.indexOf(ornt),\r\n            offset = (rotate / 90) % arr.length;// 180 = 2%4 = 2 shift exif by 2 indexes\r\n\r\n        return arr[(arr.length + index + (offset % arr.length)) % arr.length];\r\n    }\r\n\r\n    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n    function deepExtend(destination, source) {\r\n        destination = destination || {};\r\n        for (var property in source) {\r\n            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    function clone(object) {\r\n        return deepExtend({}, object);\r\n    }\r\n\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    function dispatchChange(element) {\r\n        if (\"createEvent\" in document) {\r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", false, true);\r\n            element.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            element.fireEvent(\"onchange\");\r\n        }\r\n    }\r\n\r\n    //http://jsperf.com/vanilla-css\r\n    function css(el, styles, val) {\r\n        if (typeof (styles) === 'string') {\r\n            var tmp = styles;\r\n            styles = {};\r\n            styles[tmp] = val;\r\n        }\r\n\r\n        for (var prop in styles) {\r\n            el.style[prop] = styles[prop];\r\n        }\r\n    }\r\n\r\n    function addClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.add(c);\r\n        }\r\n        else {\r\n            el.className += ' ' + c;\r\n        }\r\n    }\r\n\r\n    function removeClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.remove(c);\r\n        }\r\n        else {\r\n            el.className = el.className.replace(c, '');\r\n        }\r\n    }\r\n\r\n    function setAttributes(el, attrs) {\r\n        for (var key in attrs) {\r\n            el.setAttribute(key, attrs[key]);\r\n        }\r\n    }\r\n\r\n    function num(v) {\r\n        return parseInt(v, 10);\r\n    }\r\n\r\n    /* Utilities */\r\n    function loadImage(src, doExif) {\r\n        if (!src) { throw 'Source image missing'; }\r\n        \r\n        var img = new Image();\r\n        img.style.opacity = '0';\r\n        return new Promise(function (resolve, reject) {\r\n            function _resolve() {\r\n                img.style.opacity = '1';\r\n                setTimeout(function () {\r\n                    resolve(img);\r\n                }, 1);\r\n            }\r\n\r\n            img.removeAttribute('crossOrigin');\r\n            if (src.match(/^https?:\\/\\/|^\\/\\//)) {\r\n                img.setAttribute('crossOrigin', 'anonymous');\r\n            }\r\n\r\n            img.onload = function () {\r\n                if (doExif) {\r\n                    EXIF.getData(img, function () {\r\n                        _resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _resolve();\r\n                }\r\n            };\r\n            img.onerror = function (ev) {\r\n                img.style.opacity = 1;\r\n                setTimeout(function () {\r\n                    reject(ev);\r\n                }, 1);\r\n            };\r\n            img.src = src;\r\n        });\r\n    }\r\n\r\n    function naturalImageDimensions(img, ornt) {\r\n        var w = img.naturalWidth;\r\n        var h = img.naturalHeight;\r\n        var orient = ornt || getExifOrientation(img);\r\n        if (orient && orient >= 5) {\r\n            var x= w;\r\n            w = h;\r\n            h = x;\r\n        }\r\n        return { width: w, height: h };\r\n    }\r\n\r\n    /* CSS Transform Prototype */\r\n    var TRANSLATE_OPTS = {\r\n        'translate3d': {\r\n            suffix: ', 0px'\r\n        },\r\n        'translate': {\r\n            suffix: ''\r\n        }\r\n    };\r\n    var Transform = function (x, y, scale) {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.scale = parseFloat(scale);\r\n    };\r\n\r\n    Transform.parse = function (v) {\r\n        if (v.style) {\r\n            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n        }\r\n        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n            return Transform.fromMatrix(v);\r\n        }\r\n        else {\r\n            return Transform.fromString(v);\r\n        }\r\n    };\r\n\r\n    Transform.fromMatrix = function (v) {\r\n        var vals = v.substring(7).split(',');\r\n        if (!vals.length || v === 'none') {\r\n            vals = [1, 0, 0, 1, 0, 0];\r\n        }\r\n\r\n        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n    };\r\n\r\n    Transform.fromString = function (v) {\r\n        var values = v.split(') '),\r\n            translate = values[0].substring(Croppie.globals.translate.length + 1).split(','),\r\n            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n            x = translate.length > 1 ? translate[0] : 0,\r\n            y = translate.length > 1 ? translate[1] : 0;\r\n\r\n        return new Transform(x, y, scale);\r\n    };\r\n\r\n    Transform.prototype.toString = function () {\r\n        var suffix = TRANSLATE_OPTS[Croppie.globals.translate].suffix || '';\r\n        return Croppie.globals.translate + '(' + this.x + 'px, ' + this.y + 'px' + suffix + ') scale(' + this.scale + ')';\r\n    };\r\n\r\n    var TransformOrigin = function (el) {\r\n        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            return;\r\n        }\r\n        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n        this.x = parseFloat(css[0]);\r\n        this.y = parseFloat(css[1]);\r\n    };\r\n\r\n    TransformOrigin.prototype.toString = function () {\r\n        return this.x + 'px ' + this.y + 'px';\r\n    };\r\n\r\n    function getExifOrientation (img) {\r\n        return img.exifdata && img.exifdata.Orientation ? num(img.exifdata.Orientation) : 1;\r\n    }\r\n\r\n    function drawCanvas(canvas, img, orientation) {\r\n        var width = img.width,\r\n            height = img.height,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        ctx.save();\r\n        switch (orientation) {\r\n          case 2:\r\n             ctx.translate(width, 0);\r\n             ctx.scale(-1, 1);\r\n             break;\r\n\r\n          case 3:\r\n              ctx.translate(width, height);\r\n              ctx.rotate(180*Math.PI/180);\r\n              break;\r\n\r\n          case 4:\r\n              ctx.translate(0, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 5:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 6:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.translate(0, -height);\r\n              break;\r\n\r\n          case 7:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(-90*Math.PI/180);\r\n              ctx.translate(-width, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 8:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.translate(0, width);\r\n              ctx.rotate(-90*Math.PI/180);\r\n              break;\r\n        }\r\n        ctx.drawImage(img, 0,0, width, height);\r\n        ctx.restore();\r\n    }\r\n\r\n    /* Private Methods */\r\n    function _create() {\r\n        var self = this,\r\n            contClass = 'croppie-container',\r\n            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n            boundary, img, viewport, overlay, bw, bh;\r\n\r\n        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n        // Properties on class\r\n        self.data = {};\r\n        self.elements = {};\r\n\r\n        boundary = self.elements.boundary = document.createElement('div');\r\n        viewport = self.elements.viewport = document.createElement('div');\r\n        img = self.elements.img = document.createElement('img');\r\n        overlay = self.elements.overlay = document.createElement('div');\r\n\r\n        if (self.options.useCanvas) {\r\n            self.elements.canvas = document.createElement('canvas');\r\n            self.elements.preview = self.elements.canvas;\r\n        }\r\n        else {\r\n            self.elements.preview = img;\r\n        }\r\n\r\n        addClass(boundary, 'cr-boundary');\r\n        boundary.setAttribute('aria-dropeffect', 'none');\r\n        bw = self.options.boundary.width;\r\n        bh = self.options.boundary.height;\r\n        css(boundary, {\r\n            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n        });\r\n\r\n        addClass(viewport, 'cr-viewport');\r\n        if (customViewportClass) {\r\n            addClass(viewport, customViewportClass);\r\n        }\r\n        css(viewport, {\r\n            width: self.options.viewport.width + 'px',\r\n            height: self.options.viewport.height + 'px'\r\n        });\r\n        viewport.setAttribute('tabindex', 0);\r\n\r\n        addClass(self.elements.preview, 'cr-image');\r\n        setAttributes(self.elements.preview, { 'alt': 'preview', 'aria-grabbed': 'false' });\r\n        addClass(overlay, 'cr-overlay');\r\n\r\n        self.element.appendChild(boundary);\r\n        boundary.appendChild(self.elements.preview);\r\n        boundary.appendChild(viewport);\r\n        boundary.appendChild(overlay);\r\n\r\n        addClass(self.element, contClass);\r\n        if (self.options.customClass) {\r\n            addClass(self.element, self.options.customClass);\r\n        }\r\n\r\n        _initDraggable.call(this);\r\n\r\n        if (self.options.enableZoom) {\r\n            _initializeZoom.call(self);\r\n        }\r\n\r\n        // if (self.options.enableOrientation) {\r\n        //     _initRotationControls.call(self);\r\n        // }\r\n\r\n        if (self.options.enableResize) {\r\n            _initializeResize.call(self);\r\n        }\r\n    }\r\n\r\n    // function _initRotationControls () {\r\n    //     var self = this,\r\n    //         wrap, btnLeft, btnRight, iLeft, iRight;\r\n\r\n    //     wrap = document.createElement('div');\r\n    //     self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n    //     self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\r\n    //     wrap.appendChild(btnLeft);\r\n    //     wrap.appendChild(btnRight);\r\n\r\n    //     iLeft = document.createElement('i');\r\n    //     iRight = document.createElement('i');\r\n    //     btnLeft.appendChild(iLeft);\r\n    //     btnRight.appendChild(iRight);\r\n\r\n    //     addClass(wrap, 'cr-rotate-controls');\r\n    //     addClass(btnLeft, 'cr-rotate-l');\r\n    //     addClass(btnRight, 'cr-rotate-r');\r\n\r\n    //     self.elements.boundary.appendChild(wrap);\r\n\r\n    //     btnLeft.addEventListener('click', function () {\r\n    //         self.rotate(-90);\r\n    //     });\r\n    //     btnRight.addEventListener('click', function () {\r\n    //         self.rotate(90);\r\n    //     });\r\n    // }\r\n\r\n    function _hasExif() {\r\n        return this.options.enableExif && window.EXIF;\r\n    }\r\n\r\n    function _initializeResize () {\r\n        var self = this;\r\n        var wrap = document.createElement('div');\r\n        var isDragging = false;\r\n        var direction;\r\n        var originalX;\r\n        var originalY;\r\n        var minSize = 50;\r\n        var maxWidth;\r\n        var maxHeight;\r\n        var vr;\r\n        var hr;\r\n\r\n        addClass(wrap, 'cr-resizer');\r\n        css(wrap, {\r\n            width: this.options.viewport.width + 'px',\r\n            height: this.options.viewport.height + 'px'\r\n        });\r\n\r\n        if (this.options.resizeControls.height) {\r\n            vr = document.createElement('div');\r\n            addClass(vr, 'cr-resizer-vertical');\r\n            wrap.appendChild(vr);\r\n        }\r\n\r\n        if (this.options.resizeControls.width) {\r\n            hr = document.createElement('div');\r\n            addClass(hr, 'cr-resizer-horisontal');\r\n            wrap.appendChild(hr);\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) {\r\n                return;\r\n            }\r\n\r\n            var overlayRect = self.elements.overlay.getBoundingClientRect();\r\n\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n            direction = ev.currentTarget.className.indexOf('vertical') !== -1 ? 'v' : 'h';\r\n            maxWidth = overlayRect.width;\r\n            maxHeight = overlayRect.height;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            var pageX = ev.pageX;\r\n            var pageY = ev.pageY;\r\n\r\n            ev.preventDefault();\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX;\r\n            var deltaY = pageY - originalY;\r\n            var newHeight = self.options.viewport.height + deltaY;\r\n            var newWidth = self.options.viewport.width + deltaX;\r\n\r\n            if (direction === 'v' && newHeight >= minSize && newHeight <= maxHeight) {\r\n                css(wrap, {\r\n                    height: newHeight + 'px'\r\n                });\r\n\r\n                self.options.boundary.height += deltaY;\r\n                css(self.elements.boundary, {\r\n                    height: self.options.boundary.height + 'px'\r\n                });\r\n\r\n                self.options.viewport.height += deltaY;\r\n                css(self.elements.viewport, {\r\n                    height: self.options.viewport.height + 'px'\r\n                });\r\n            }\r\n            else if (direction === 'h' && newWidth >= minSize && newWidth <= maxWidth) {\r\n                css(wrap, {\r\n                    width: newWidth + 'px'\r\n                });\r\n\r\n                self.options.boundary.width += deltaX;\r\n                css(self.elements.boundary, {\r\n                    width: self.options.boundary.width + 'px'\r\n                });\r\n\r\n                self.options.viewport.width += deltaX;\r\n                css(self.elements.viewport, {\r\n                    width: self.options.viewport.width + 'px'\r\n                });\r\n            }\r\n\r\n            _updateOverlay.call(self);\r\n            _updateZoomLimits.call(self);\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n        }\r\n\r\n        if (vr) {\r\n            vr.addEventListener('mousedown', mouseDown);\r\n            vr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        if (hr) {\r\n            hr.addEventListener('mousedown', mouseDown);\r\n            hr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        this.elements.boundary.appendChild(wrap);\r\n    }\r\n\r\n    function _setZoomerVal(v) {\r\n        if (this.options.enableZoom) {\r\n            var z = this.elements.zoomer,\r\n                val = fix(v, 4);\r\n\r\n            z.value = Math.max(parseFloat(z.min), Math.min(parseFloat(z.max), val)).toString();\r\n        }\r\n    }\r\n\r\n    function _initializeZoom() {\r\n        var self = this,\r\n            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n            zoomer = self.elements.zoomer = document.createElement('input');\r\n\r\n        addClass(wrap, 'cr-slider-wrap');\r\n        addClass(zoomer, 'cr-slider');\r\n        zoomer.type = 'range';\r\n        zoomer.step = '0.0001';\r\n        zoomer.value = '1';\r\n        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n        zoomer.setAttribute('aria-label', 'zoom');\r\n\r\n        self.element.appendChild(wrap);\r\n        wrap.appendChild(zoomer);\r\n\r\n        self._currentZoom = 1;\r\n\r\n        function change() {\r\n            _onZoom.call(self, {\r\n                value: parseFloat(zoomer.value),\r\n                origin: new TransformOrigin(self.elements.preview),\r\n                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n                transform: Transform.parse(self.elements.preview)\r\n            });\r\n        }\r\n\r\n        function scroll(ev) {\r\n            var delta, targetZoom;\r\n\r\n            if(self.options.mouseWheelZoom === 'ctrl' && ev.ctrlKey !== true){\r\n              return 0;\r\n            } else if (ev.wheelDelta) {\r\n                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n            } else if (ev.deltaY) {\r\n                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n            } else if (ev.detail) {\r\n                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n            } else {\r\n                delta = 0;\r\n            }\r\n\r\n            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\r\n            ev.preventDefault();\r\n            _setZoomerVal.call(self, targetZoom);\r\n            change.call(self);\r\n        }\r\n\r\n        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n        self.elements.zoomer.addEventListener('change', change);\r\n\r\n        if (self.options.mouseWheelZoom) {\r\n            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n        }\r\n    }\r\n\r\n    function _onZoom(ui) {\r\n        var self = this,\r\n            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview);\r\n\r\n        function applyCss() {\r\n            var transCss = {};\r\n            transCss[CSS_TRANSFORM] = transform.toString();\r\n            transCss[CSS_TRANS_ORG] = origin.toString();\r\n            css(self.elements.preview, transCss);\r\n        }\r\n\r\n        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n        transform.scale = self._currentZoom;\r\n        self.elements.zoomer.setAttribute('aria-valuenow', self._currentZoom);\r\n        applyCss();\r\n\r\n        if (self.options.enforceBoundary) {\r\n            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n                transBoundaries = boundaries.translate,\r\n                oBoundaries = boundaries.origin;\r\n\r\n            if (transform.x >= transBoundaries.maxX) {\r\n                origin.x = oBoundaries.minX;\r\n                transform.x = transBoundaries.maxX;\r\n            }\r\n\r\n            if (transform.x <= transBoundaries.minX) {\r\n                origin.x = oBoundaries.maxX;\r\n                transform.x = transBoundaries.minX;\r\n            }\r\n\r\n            if (transform.y >= transBoundaries.maxY) {\r\n                origin.y = oBoundaries.minY;\r\n                transform.y = transBoundaries.maxY;\r\n            }\r\n\r\n            if (transform.y <= transBoundaries.minY) {\r\n                origin.y = oBoundaries.maxY;\r\n                transform.y = transBoundaries.minY;\r\n            }\r\n        }\r\n        applyCss();\r\n        _debouncedOverlay.call(self);\r\n        _triggerUpdate.call(self);\r\n    }\r\n\r\n    function _getVirtualBoundaries(viewport) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            vpWidth = viewport.width,\r\n            vpHeight = viewport.height,\r\n            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n            imgRect = self.elements.preview.getBoundingClientRect(),\r\n            curImgWidth = imgRect.width,\r\n            curImgHeight = imgRect.height,\r\n            halfWidth = vpWidth / 2,\r\n            halfHeight = vpHeight / 2;\r\n\r\n        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\r\n        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\r\n        var originMinX = (1 / scale) * halfWidth;\r\n        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\r\n        var originMinY = (1 / scale) * halfHeight;\r\n        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\r\n        return {\r\n            translate: {\r\n                maxX: maxX,\r\n                minX: minX,\r\n                maxY: maxY,\r\n                minY: minY\r\n            },\r\n            origin: {\r\n                maxX: originMaxX,\r\n                minX: originMinX,\r\n                maxY: originMaxY,\r\n                minY: originMinY\r\n            }\r\n        };\r\n    }\r\n\r\n    function _updateCenterPoint(rotate) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            data = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n            pc = new TransformOrigin(self.elements.preview),\r\n            top = (vpData.top - data.top) + (vpData.height / 2),\r\n            left = (vpData.left - data.left) + (vpData.width / 2),\r\n            center = {},\r\n            adj = {};\r\n\r\n        if (rotate) {\r\n            var cx = pc.x;\r\n            var cy = pc.y;\r\n            var tx = transform.x;\r\n            var ty = transform.y;\r\n\r\n            center.y = cx;\r\n            center.x = cy;\r\n            transform.y = tx;\r\n            transform.x = ty;\r\n        }\r\n        else {\r\n            center.y = top / scale;\r\n            center.x = left / scale;\r\n\r\n            adj.y = (center.y - pc.y) * (1 - scale);\r\n            adj.x = (center.x - pc.x) * (1 - scale);\r\n\r\n            transform.x -= adj.x;\r\n            transform.y -= adj.y;\r\n        }\r\n\r\n        var newCss = {};\r\n        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n        newCss[CSS_TRANSFORM] = transform.toString();\r\n        css(self.elements.preview, newCss);\r\n    }\r\n\r\n    function _initDraggable() {\r\n        var self = this,\r\n            isDragging = false,\r\n            originalX,\r\n            originalY,\r\n            originalDistance,\r\n            vpRect,\r\n            transform;\r\n\r\n        function assignTransformCoordinates(deltaX, deltaY) {\r\n            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n                top = transform.y + deltaY,\r\n                left = transform.x + deltaX;\r\n\r\n            if (self.options.enforceBoundary) {\r\n                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n                    transform.y = top;\r\n                }\r\n\r\n                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n                    transform.x = left;\r\n                }\r\n            }\r\n            else {\r\n                transform.y = top;\r\n                transform.x = left;\r\n            }\r\n        }\r\n\r\n        function toggleGrabState(isDragging) {\r\n          self.elements.preview.setAttribute('aria-grabbed', isDragging);\r\n          self.elements.boundary.setAttribute('aria-dropeffect', isDragging? 'move': 'none');\r\n        }\r\n\r\n        function keyDown(ev) {\r\n            var LEFT_ARROW  = 37,\r\n                UP_ARROW    = 38,\r\n                RIGHT_ARROW = 39,\r\n                DOWN_ARROW  = 40;\r\n\r\n            if (ev.shiftKey && (ev.keyCode === UP_ARROW || ev.keyCode === DOWN_ARROW)) {\r\n                var zoom;\r\n                if (ev.keyCode === UP_ARROW) {\r\n                    zoom = parseFloat(self.elements.zoomer.value) + parseFloat(self.elements.zoomer.step)\r\n                }\r\n                else {\r\n                    zoom = parseFloat(self.elements.zoomer.value) - parseFloat(self.elements.zoomer.step)\r\n                }\r\n                self.setZoom(zoom);\r\n            }\r\n            else if (self.options.enableKeyMovement && (ev.keyCode >= 37 && ev.keyCode <= 40)) {\r\n                ev.preventDefault();\r\n                var movement = parseKeyDown(ev.keyCode);\r\n\r\n                transform = Transform.parse(self.elements.preview);\r\n                document.body.style[CSS_USERSELECT] = 'none';\r\n                vpRect = self.elements.viewport.getBoundingClientRect();\r\n                keyMove(movement);\r\n            }\r\n\r\n            function parseKeyDown(key) {\r\n                switch (key) {\r\n                    case LEFT_ARROW:\r\n                        return [1, 0];\r\n                    case UP_ARROW:\r\n                        return [0, 1];\r\n                    case RIGHT_ARROW:\r\n                        return [-1, 0];\r\n                    case DOWN_ARROW:\r\n                        return [0, -1];\r\n                }\r\n            }\r\n        }\r\n\r\n        function keyMove(movement) {\r\n            var deltaX = movement[0],\r\n                deltaY = movement[1],\r\n                newCss = {};\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) return;\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n            toggleGrabState(isDragging);\r\n            transform = Transform.parse(self.elements.preview);\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n            vpRect = self.elements.viewport.getBoundingClientRect();\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            ev.preventDefault();\r\n            var pageX = ev.pageX,\r\n                pageY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX,\r\n                deltaY = pageY - originalY,\r\n                newCss = {};\r\n\r\n            if (ev.type === 'touchmove') {\r\n                if (ev.touches.length > 1) {\r\n                    var touch1 = ev.touches[0];\r\n                    var touch2 = ev.touches[1];\r\n                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\r\n                    if (!originalDistance) {\r\n                        originalDistance = dist / self._currentZoom;\r\n                    }\r\n\r\n                    var scale = dist / originalDistance;\r\n\r\n                    _setZoomerVal.call(self, scale);\r\n                    dispatchChange(self.elements.zoomer);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            toggleGrabState(isDragging);\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n        self.elements.viewport.addEventListener('keydown', keyDown);\r\n        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n    }\r\n\r\n    function _updateOverlay() {\r\n        if (!this.elements) return; // since this is debounced, it can be fired after destroy\r\n        var self = this,\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        css(self.elements.overlay, {\r\n            width: imgData.width + 'px',\r\n            height: imgData.height + 'px',\r\n            top: (imgData.top - boundRect.top) + 'px',\r\n            left: (imgData.left - boundRect.left) + 'px'\r\n        });\r\n    }\r\n    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\r\n    function _triggerUpdate() {\r\n        var self = this,\r\n            data = self.get();\r\n\r\n        if (!_isVisible.call(self)) {\r\n            return;\r\n        }\r\n\r\n        self.options.update.call(self, data);\r\n        if (self.$ && typeof Prototype === 'undefined') {\r\n            self.$(self.element).trigger('update.croppie', data);\r\n        }\r\n        else {\r\n            var ev;\r\n            if (window.CustomEvent) {\r\n                ev = new CustomEvent('update', { detail: data });\r\n            } else {\r\n                ev = document.createEvent('CustomEvent');\r\n                ev.initCustomEvent('update', true, true, data);\r\n            }\r\n\r\n            self.element.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n    function _isVisible() {\r\n        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n    }\r\n\r\n    function _updatePropertiesFromImage() {\r\n        var self = this,\r\n            initialZoom = 1,\r\n            cssReset = {},\r\n            img = self.elements.preview,\r\n            imgData,\r\n            transformReset = new Transform(0, 0, initialZoom),\r\n            originReset = new TransformOrigin(),\r\n            isVisible = _isVisible.call(self);\r\n\r\n        if (!isVisible || self.data.bound) {// if the croppie isn't visible or it doesn't need binding\r\n            return;\r\n        }\r\n\r\n        self.data.bound = true;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n        cssReset['opacity'] = 1;\r\n        css(img, cssReset);\r\n\r\n        imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        self._originalImageWidth = imgData.width;\r\n        self._originalImageHeight = imgData.height;\r\n        self.data.orientation = _hasExif.call(self) ? getExifOrientation(self.elements.img) : self.data.orientation;\r\n\r\n        if (self.options.enableZoom) {\r\n            _updateZoomLimits.call(self, true);\r\n        }\r\n        else {\r\n            self._currentZoom = initialZoom;\r\n        }\r\n\r\n        transformReset.scale = self._currentZoom;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        css(img, cssReset);\r\n\r\n        if (self.data.points.length) {\r\n            _bindPoints.call(self, self.data.points);\r\n        }\r\n        else {\r\n            _centerImage.call(self);\r\n        }\r\n\r\n        _updateCenterPoint.call(self);\r\n        _updateOverlay.call(self);\r\n    }\r\n\r\n    function _updateZoomLimits (initial) {\r\n        var self = this,\r\n            minZoom = Math.max(self.options.minZoom, 0) || 0,\r\n            maxZoom = self.options.maxZoom || 1.5,\r\n            initialZoom,\r\n            defaultInitialZoom,\r\n            zoomer = self.elements.zoomer,\r\n            scale = parseFloat(zoomer.value),\r\n            boundaryData = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = naturalImageDimensions(self.elements.img, self.data.orientation),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            minW,\r\n            minH;\r\n        if (self.options.enforceBoundary) {\r\n            minW = vpData.width / imgData.width;\r\n            minH = vpData.height / imgData.height;\r\n            minZoom = Math.max(minW, minH);\r\n        }\r\n\r\n        if (minZoom >= maxZoom) {\r\n            maxZoom = minZoom + 1;\r\n        }\r\n\r\n        zoomer.min = fix(minZoom, 4);\r\n        zoomer.max = fix(maxZoom, 4);\r\n\r\n        if (!initial && (scale < zoomer.min || scale > zoomer.max)) {\r\n            _setZoomerVal.call(self, scale < zoomer.min ? zoomer.min : zoomer.max);\r\n        }\r\n        else if (initial) {\r\n            defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n            _setZoomerVal.call(self, initialZoom);\r\n        }\r\n\r\n        dispatchChange(zoomer);\r\n    }\r\n\r\n    function _bindPoints(points) {\r\n        if (points.length !== 4) {\r\n            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n        }\r\n        var self = this,\r\n            pointsWidth = points[2] - points[0],\r\n            // pointsHeight = points[3] - points[1],\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            vpOffset = {\r\n                left: vpData.left - boundRect.left,\r\n                top: vpData.top - boundRect.top\r\n            },\r\n            scale = vpData.width / pointsWidth,\r\n            originTop = points[1],\r\n            originLeft = points[0],\r\n            transformTop = (-1 * points[1]) + vpOffset.top,\r\n            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n            newCss = {};\r\n\r\n        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n        css(self.elements.preview, newCss);\r\n\r\n        _setZoomerVal.call(self, scale);\r\n        self._currentZoom = scale;\r\n    }\r\n\r\n    function _centerImage() {\r\n        var self = this,\r\n            imgDim = self.elements.preview.getBoundingClientRect(),\r\n            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n            vpLeft = vpDim.left - boundDim.left,\r\n            vpTop = vpDim.top - boundDim.top,\r\n            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n            transform = new Transform(w, h, self._currentZoom);\r\n\r\n        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n    }\r\n\r\n    function _transferImageToCanvas(customOrientation) {\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        var orientation = self.options.enableOrientation && customOrientation || getExifOrientation(img);\r\n        drawCanvas(canvas, img, orientation);\r\n    }\r\n\r\n    function _getCanvas(data) {\r\n        var self = this,\r\n            points = data.points,\r\n            left = num(points[0]),\r\n            top = num(points[1]),\r\n            right = num(points[2]),\r\n            bottom = num(points[3]),\r\n            width = right-left,\r\n            height = bottom-top,\r\n            circle = data.circle,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            startX = 0,\r\n            startY = 0,\r\n            canvasWidth = data.outputWidth || width,\r\n            canvasHeight = data.outputHeight || height;\r\n\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n\r\n        if (data.backgroundColor) {\r\n            ctx.fillStyle = data.backgroundColor;\r\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        }\r\n\r\n        // By default assume we're going to draw the entire\r\n        // source image onto the destination canvas.\r\n        var sx = left,\r\n            sy = top,\r\n            sWidth = width,\r\n            sHeight = height,\r\n            dx = 0,\r\n            dy = 0,\r\n            dWidth = canvasWidth,\r\n            dHeight = canvasHeight;\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the x-axis.\r\n        // Handle translations when projecting onto the destination canvas.\r\n        //\r\n\r\n        // The smallest possible source x-position is 0.\r\n        if (left < 0) {\r\n            sx = 0;\r\n            dx = (Math.abs(left) / width) * canvasWidth;\r\n        }\r\n\r\n        // The largest possible source width is the original image's width.\r\n        if (sWidth + sx > self._originalImageWidth) {\r\n            sWidth = self._originalImageWidth - sx;\r\n            dWidth =  (sWidth / width) * canvasWidth;\r\n        }\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the y-axis.\r\n        //\r\n\r\n        // The smallest possible source y-position is 0.\r\n        if (top < 0) {\r\n            sy = 0;\r\n            dy = (Math.abs(top) / height) * canvasHeight;\r\n        }\r\n\r\n        // The largest possible source height is the original image's height.\r\n        if (sHeight + sy > self._originalImageHeight) {\r\n            sHeight = self._originalImageHeight - sy;\r\n            dHeight = (sHeight / height) * canvasHeight;\r\n        }\r\n\r\n        // console.table({ left, right, top, bottom, canvasWidth, canvasHeight, width, height, startX, startY, circle, sx, sy, dx, dy, sWidth, sHeight, dWidth, dHeight });\r\n\r\n        ctx.drawImage(this.elements.preview, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\r\n        if (circle) {\r\n            ctx.fillStyle = '#fff';\r\n            ctx.globalCompositeOperation = 'destination-in';\r\n            ctx.beginPath();\r\n            ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return canvas;\r\n    }\r\n\r\n    function _getHtmlResult(data) {\r\n        var points = data.points,\r\n            div = document.createElement('div'),\r\n            img = document.createElement('img'),\r\n            width = points[2] - points[0],\r\n            height = points[3] - points[1];\r\n\r\n        addClass(div, 'croppie-result');\r\n        div.appendChild(img);\r\n        css(img, {\r\n            left: (-1 * points[0]) + 'px',\r\n            top: (-1 * points[1]) + 'px'\r\n        });\r\n        img.src = data.url;\r\n        css(div, {\r\n            width: width + 'px',\r\n            height: height + 'px'\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    function _getBase64Result(data) {\r\n        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n    }\r\n\r\n    function _getBlobResult(data) {\r\n        var self = this;\r\n        return new Promise(function (resolve) {\r\n            _getCanvas.call(self, data).toBlob(function (blob) {\r\n                resolve(blob);\r\n            }, data.format, data.quality);\r\n        });\r\n    }\r\n\r\n    function _replaceImage(img) {\r\n        if (this.elements.img.parentNode) {\r\n            Array.prototype.forEach.call(this.elements.img.classList, function(c) { img.classList.add(c); });\r\n            this.elements.img.parentNode.replaceChild(img, this.elements.img);\r\n            this.elements.preview = img; // if the img is attached to the DOM, they're not using the canvas\r\n        }\r\n        this.elements.img = img;\r\n    }\r\n\r\n    function _bind(options, cb) {\r\n        var self = this,\r\n            url,\r\n            points = [],\r\n            zoom = null,\r\n            hasExif = _hasExif.call(self);\r\n\r\n        if (typeof (options) === 'string') {\r\n            url = options;\r\n            options = {};\r\n        }\r\n        else if (Array.isArray(options)) {\r\n            points = options.slice();\r\n        }\r\n        else if (typeof (options) === 'undefined' && self.data.url) { //refreshing\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            return null;\r\n        }\r\n        else {\r\n            url = options.url;\r\n            points = options.points || [];\r\n            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n        }\r\n\r\n        self.data.bound = false;\r\n        self.data.url = url || self.data.url;\r\n        self.data.boundZoom = zoom;\r\n\r\n        return loadImage(url, hasExif).then(function (img) {\r\n            _replaceImage.call(self, img);\r\n            if (!points.length) {\r\n                var natDim = naturalImageDimensions(img);\r\n                var rect = self.elements.viewport.getBoundingClientRect();\r\n                var aspectRatio = rect.width / rect.height;\r\n                var imgAspectRatio = natDim.width / natDim.height;\r\n                var width, height;\r\n\r\n                if (imgAspectRatio > aspectRatio) {\r\n                    height = natDim.height;\r\n                    width = height * aspectRatio;\r\n                }\r\n                else {\r\n                    width = natDim.width;\r\n                    height = natDim.height / aspectRatio;\r\n                }\r\n\r\n                var x0 = (natDim.width - width) / 2;\r\n                var y0 = (natDim.height - height) / 2;\r\n                var x1 = x0 + width;\r\n                var y1 = y0 + height;\r\n                self.data.points = [x0, y0, x1, y1];\r\n            }\r\n            else if (self.options.relative) {\r\n                points = [\r\n                    points[0] * img.naturalWidth / 100,\r\n                    points[1] * img.naturalHeight / 100,\r\n                    points[2] * img.naturalWidth / 100,\r\n                    points[3] * img.naturalHeight / 100\r\n                ];\r\n            }\r\n\r\n            self.data.orientation = options.orientation || 1;\r\n            self.data.points = points.map(function (p) {\r\n                return parseFloat(p);\r\n            });\r\n            if (self.options.useCanvas) {\r\n                _transferImageToCanvas.call(self, self.data.orientation);\r\n            }\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            cb && cb();\r\n        });\r\n    }\r\n\r\n    function fix(v, decimalPoints) {\r\n        return parseFloat(v).toFixed(decimalPoints || 0);\r\n    }\r\n\r\n    function _get() {\r\n        var self = this,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            x1 = vpData.left - imgData.left,\r\n            y1 = vpData.top - imgData.top,\r\n            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2, //border\r\n            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n            scale = self._currentZoom;\r\n\r\n        if (scale === Infinity || isNaN(scale)) {\r\n            scale = 1;\r\n        }\r\n\r\n        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n        x1 = Math.max(max, x1 / scale);\r\n        y1 = Math.max(max, y1 / scale);\r\n        x2 = Math.max(max, x2 / scale);\r\n        y2 = Math.max(max, y2 / scale);\r\n\r\n        return {\r\n            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n            zoom: scale,\r\n            orientation: self.data.orientation\r\n        };\r\n    }\r\n\r\n    var RESULT_DEFAULTS = {\r\n            type: 'canvas',\r\n            format: 'png',\r\n            quality: 1\r\n        },\r\n        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\r\n    function _result(options) {\r\n        var self = this,\r\n            data = _get.call(self),\r\n            opts = deepExtend(clone(RESULT_DEFAULTS), clone(options)),\r\n            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n            size = opts.size || 'viewport',\r\n            format = opts.format,\r\n            quality = opts.quality,\r\n            backgroundColor = opts.backgroundColor,\r\n            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n            ratio = vpRect.width / vpRect.height,\r\n            prom;\r\n\r\n        if (size === 'viewport') {\r\n            data.outputWidth = vpRect.width;\r\n            data.outputHeight = vpRect.height;\r\n        } else if (typeof size === 'object') {\r\n            if (size.width && size.height) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.height;\r\n            } else if (size.width) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.width / ratio;\r\n            } else if (size.height) {\r\n                data.outputWidth = size.height * ratio;\r\n                data.outputHeight = size.height;\r\n            }\r\n        }\r\n\r\n        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n            data.format = 'image/' + format;\r\n            data.quality = quality;\r\n        }\r\n\r\n        data.circle = circle;\r\n        data.url = self.data.url;\r\n        data.backgroundColor = backgroundColor;\r\n\r\n        prom = new Promise(function (resolve) {\r\n            switch(resultType.toLowerCase())\r\n            {\r\n                case 'rawcanvas':\r\n                    resolve(_getCanvas.call(self, data));\r\n                    break;\r\n                case 'canvas':\r\n                case 'base64':\r\n                    resolve(_getBase64Result.call(self, data));\r\n                    break;\r\n                case 'blob':\r\n                    _getBlobResult.call(self, data).then(resolve);\r\n                    break;\r\n                default:\r\n                    resolve(_getHtmlResult.call(self, data));\r\n                    break;\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function _refresh() {\r\n        _updatePropertiesFromImage.call(this);\r\n    }\r\n\r\n    function _rotate(deg) {\r\n        if (!this.options.useCanvas || !this.options.enableOrientation) {\r\n            throw 'Croppie: Cannot rotate without enableOrientation && EXIF.js included';\r\n        }\r\n\r\n        var self = this,\r\n            canvas = self.elements.canvas;\r\n\r\n        self.data.orientation = getExifOffset(self.data.orientation, deg);\r\n        drawCanvas(canvas, self.elements.img, self.data.orientation);\r\n        _updateCenterPoint.call(self, true);\r\n        _updateZoomLimits.call(self);\r\n\r\n        // Reverses image dimensions if the degrees of rotation is not divisible by 180.\r\n        if ((Math.abs(deg) / 90) % 2 === 1) {\r\n            var oldHeight = self._originalImageHeight;\r\n            var oldWidth = self._originalImageWidth;\r\n            self._originalImageWidth = oldHeight;\r\n            self._originalImageHeight = oldWidth;\r\n        }\r\n    }\r\n\r\n    function _destroy() {\r\n        var self = this;\r\n        self.element.removeChild(self.elements.boundary);\r\n        removeClass(self.element, 'croppie-container');\r\n        if (self.options.enableZoom) {\r\n            self.element.removeChild(self.elements.zoomerWrap);\r\n        }\r\n        delete self.elements;\r\n    }\r\n\r\n    if (typeof window !== 'undefined' && window.jQuery) {\r\n        var $ = window.jQuery;\r\n        $.fn.croppie = function (opts) {\r\n            var ot = typeof opts;\r\n\r\n            if (ot === 'string') {\r\n                var args = Array.prototype.slice.call(arguments, 1);\r\n                var singleInst = $(this).data('croppie');\r\n\r\n                if (opts === 'get') {\r\n                    return singleInst.get();\r\n                }\r\n                else if (opts === 'result') {\r\n                    return singleInst.result.apply(singleInst, args);\r\n                }\r\n                else if (opts === 'bind') {\r\n                    return singleInst.bind.apply(singleInst, args);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    var i = $(this).data('croppie');\r\n                    if (!i) return;\r\n\r\n                    var method = i[opts];\r\n                    if ($.isFunction(method)) {\r\n                        method.apply(i, args);\r\n                        if (opts === 'destroy') {\r\n                            $(this).removeData('croppie');\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw 'Croppie ' + opts + ' method not found';\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return this.each(function () {\r\n                    var i = new Croppie(this, opts);\r\n                    i.$ = $;\r\n                    $(this).data('croppie', i);\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function Croppie(element, opts) {\r\n        if (element.className.indexOf('croppie-container') > -1) {\r\n            throw new Error(\"Croppie: Can't initialize croppie more than once\");\r\n        }\r\n        this.element = element;\r\n        this.options = deepExtend(clone(Croppie.defaults), opts);\r\n\r\n        if (this.element.tagName.toLowerCase() === 'img') {\r\n            var origImage = this.element;\r\n            addClass(origImage, 'cr-original-image');\r\n            setAttributes(origImage, {'aria-hidden' : 'true', 'alt' : '' });\r\n            var replacementDiv = document.createElement('div');\r\n            this.element.parentNode.appendChild(replacementDiv);\r\n            replacementDiv.appendChild(origImage);\r\n            this.element = replacementDiv;\r\n            this.options.url = this.options.url || origImage.src;\r\n        }\r\n\r\n        _create.call(this);\r\n        if (this.options.url) {\r\n            var bindOpts = {\r\n                url: this.options.url,\r\n                points: this.options.points\r\n            };\r\n            delete this.options['url'];\r\n            delete this.options['points'];\r\n            _bind.call(this, bindOpts);\r\n        }\r\n    }\r\n\r\n    Croppie.defaults = {\r\n        viewport: {\r\n            width: 100,\r\n            height: 100,\r\n            type: 'square'\r\n        },\r\n        boundary: { },\r\n        orientationControls: {\r\n            enabled: true,\r\n            leftClass: '',\r\n            rightClass: ''\r\n        },\r\n        resizeControls: {\r\n            width: true,\r\n            height: true\r\n        },\r\n        customClass: '',\r\n        showZoomer: true,\r\n        enableZoom: true,\r\n        enableResize: false,\r\n        mouseWheelZoom: true,\r\n        enableExif: false,\r\n        enforceBoundary: true,\r\n        enableOrientation: false,\r\n        enableKeyMovement: true,\r\n        update: function () { }\r\n    };\r\n\r\n    Croppie.globals = {\r\n        translate: 'translate3d'\r\n    };\r\n\r\n    deepExtend(Croppie.prototype, {\r\n        bind: function (options, cb) {\r\n            return _bind.call(this, options, cb);\r\n        },\r\n        get: function () {\r\n            var data = _get.call(this);\r\n            var points = data.points;\r\n            if (this.options.relative) {\r\n                points[0] /= this.elements.img.naturalWidth / 100;\r\n                points[1] /= this.elements.img.naturalHeight / 100;\r\n                points[2] /= this.elements.img.naturalWidth / 100;\r\n                points[3] /= this.elements.img.naturalHeight / 100;\r\n            }\r\n            return data;\r\n        },\r\n        result: function (type) {\r\n            return _result.call(this, type);\r\n        },\r\n        refresh: function () {\r\n            return _refresh.call(this);\r\n        },\r\n        setZoom: function (v) {\r\n            _setZoomerVal.call(this, v);\r\n            dispatchChange(this.elements.zoomer);\r\n        },\r\n        rotate: function (deg) {\r\n            _rotate.call(this, deg);\r\n        },\r\n        destroy: function () {\r\n            return _destroy.call(this);\r\n        }\r\n    });\r\n    return Croppie;\r\n}));\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}