{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/blocks/Petition/js/onsubmit.js"],"names":["$","on","petition_form_element","post_form_value","getFormObj","form_config","action","nonce","window","ad_campaign","toggleDisable","find","ajax","type","url","ajaxUrl","data","success","console","log","dataLayer","push","analytics_campaign","ga_action","phone","fbq","socialBlueDeDuplicate","apref","jalt_track","cardflip","clangct","getUrlVars","undefined","clang","conversion","track","error","cardback","parentNode","nextElementSibling","hide","append","location","href","el","formObj","inputs","serializeArray","each","i","input","name","value","prop","element","parent","card","toggle","css","flip_positionattribute","toggleClass","one","off","fireShareEvent","platform","form_id","email","apHost","document","protocol","apSrc","_apOrderValue","_apOrderNumber","_apRef","unescape","err","script","createElement","src","getElementsByTagName","appendChild","vars","hash","uri","split","hashes","slice","indexOf","length"],"mappings":"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","file":"onsubmit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/src/blocks/Petition/js/onsubmit.js\");\n","$('.gpnl-petitionform').on('submit', function () {\n  var petition_form_element = this;\n  // Get the  parameter from the petition form and add the action and CSRF protection\n  var post_form_value = getFormObj(petition_form_element);\n  var form_config = 'petition_form_object_' + post_form_value['form_id'];\n\n  post_form_value.action = 'petition_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.ad_campaign = window[form_config].ad_campaign;\n\n  // Disable the form so people can't resubmit\n  toggleDisable($(petition_form_element).find('*'));\n\n  // Do a ajax call to the wp_admin admin_ajax.php,\n  // which triggers processing function in the petition block\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function(data) {\n      // eslint-disable-next-line no-console\n      console.log('^-^');\n\n      // Send conversion event to the GTM\n      if (typeof dataLayer !== 'undefined') {\n        dataLayer.push({\n          'event'         :'petitiebutton',\n          'conv_campaign' : window[form_config].analytics_campaign,\n          'conv_action'   : window[form_config].ga_action,\n          'conv_label'    :'registreer'\n        });\n      }\n\n      // if consent was given by entering phonenumber\n      if (post_form_value.phone !== '') {\n        // Send conversion event to the GTM\n        if (typeof dataLayer !== 'undefined') {\n          dataLayer.push({\n            'event'         :'petitiebutton',\n            'conv_campaign' : window[form_config].analytics_campaign,\n            'conv_action'   :'telnr',\n            'conv_label'    :'Ja'\n          });\n        }\n        // If an ad campaign is run by an external company fire the conversiontracking\n        if (window[form_config].ad_campaign === 'SB') {\n          fbq('track', 'Lead');\n          // if it is run by social blue, also deduplicate\n          socialBlueDeDuplicate(post_form_value['mail'], data['data']['phone'], window[form_config].apref);\n        } else if (window[form_config].ad_campaign === 'JA') {\n          fbq('track', window[form_config].jalt_track);\n        }\n      }\n      else{\n        if (typeof dataLayer !== 'undefined') {\n          dataLayer.push({\n            'event'         :'petitiebutton',\n            'conv_campaign' : window[form_config].analytics_campaign,\n            'conv_action'   :'telnr',\n            'conv_label'    :'Nee'\n          });\n        }\n      }\n\n      // cardflip the card, positionattribute flips to make sure no problems arises with different lengths of the front and back of the card, finally hide the front\n      cardflip(petition_form_element);\n      let clangct=getUrlVars()['clangct'];\n      if(clangct != undefined){clang.conversion.track();}\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      // eslint-disable-next-line no-console\n      console.log('o_o');\n      var cardback = $(petition_form_element.parentNode.nextElementSibling);\n      cardback.find('*').hide('');\n      cardback.append('<p>Sorry, er gaat momenteel iets fout, probeer het nu of later opnieuw.</p>');\n      cardback.append(\n        '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n        '\">Probeer opnieuw</a>');\n      cardflip(petition_form_element);\n    }\n  });\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n\n}\n\n// toggle the flipped class for the card parent\nfunction cardflip(el) {\n  let element = $(el);\n  let parent =  el.parentNode;\n  let card = $(el.parentNode.parentNode);\n\n  // first hide the signing button\n  $(element.find('.signBtn')).toggle();\n  $(element.find('.policies')).toggle();\n  // then cardflip the position attribute on the front and back of the card to support different lengths front and back\n  $(parent.nextElementSibling).css( 'position', flip_positionattribute(parent.nextElementSibling));\n  $(parent).css( 'position', flip_positionattribute(parent));\n  // then cardflip the card\n  card.toggleClass('flipped');\n\n  // after animation hide the front\n  card.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',\n    function() {\n      $(parent).toggle();\n      card.off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend');\n    });\n\n}\n\nfunction flip_positionattribute (el){\n  return $(el).css('position') === 'absolute' ? 'relative' : 'absolute';\n}\n\n/* eslint-disable */\nfunction fireShareEvent (platform, form_id){\n  if (typeof dataLayer !== 'undefined') {\n    let form_config = 'petition_form_object_' + form_id;\n    dataLayer.push({\n      'event'         :'petitiebutton',\n      'conv_campaign' :window[form_config].analytics_campaign,\n      'conv_action'   :window[form_config].ga_action,\n      'conv_label'    :'share_' + platform});\n  }\n  else{\n    console.log('GTM not defined?');\n  }\n}\n/* eslint-enable */\n\n/* eslint-disable */\n// Send the supporter data to for deduplication\nfunction socialBlueDeDuplicate(email, phone, apref) {\n  var apHost = ('https:' == document.location.protocol ? 'https://secure.event.' : 'http://www.') + 'affiliatepartners.com';\n  var apSrc = '/js/ApConversionPixelV1.1.js';\n\n  _apOrderValue = 0;\n  _apOrderNumber = 'email=' + email + '-telefoonnumer=' + phone;\n  _apRef = apref;\n\n  try {\n    $('body').append(unescape('%3Cscript src=\\'' + apHost + apSrc + '\\' type=\\'text/javascript\\'%3E%3C/script%3E'));\n  } catch (err) {\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = apHost + apSrc;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  }\n}\n/* eslint-enable */\n\n// REFACTOR IE11 doesn't support UrlSearchParams, so custom UrlParam function.\n// \tConsider polyfilling it now? or wait until we drop IE11 support and switch then?\nfunction getUrlVars(){\n  var vars = [],\n    hash;\n  var uri = window.location.href.split('#')[0];\n  var hashes = uri.slice(window.location.href.indexOf('?') + 1).split('&');\n  for(var i = 0; i < hashes.length; i++){\n    hash = hashes[i].split('=');\n    vars.push(hash[0]);\n    vars[hash[0]] = hash[1];\n  }\n  return vars;\n}\n"],"sourceRoot":""}